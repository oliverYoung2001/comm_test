make -C csrc clean
make[1]: Entering directory '/home/yhy/llm/comm_test/csrc'
rm -f `ls *.o | grep -v jsoncpp.o`
rm -f all2all_test net_test net_test_cuda conflict_test_cuda net_test_mpi conflict_allinone net_test_cpu nccl_test cpu2gpu \
   benchmark_p2p ring_patterns all2all_baseline single_turn mixed_p2p netflow all2allv_MPI all2allv_allinone
rm -rf build
make[1]: Leaving directory '/home/yhy/llm/comm_test/csrc'
make -C csrc conflict_allinone_c2g
make[1]: Entering directory '/home/yhy/llm/comm_test/csrc'
nvcc conflict_allinone_c2g.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o conflict_allinone_c2g.o
nvcc comm.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o comm.o
nvcc utils.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o utils.o
mkdir -p build
"`which mpicxx`" conflict_allinone_c2g.o comm.o jsoncpp.o utils.o -no-pie -std=c++11 -fopenmp -L/home/yhy/.local/nccl/build/lib -L/home/spack/spack/opt/spack/linux-debian12-cascadelake/gcc-12.2.0/cuda-12.0.1-34tfuheflqvthq3cikpjku6rigtpcsse/bin/../lib64 -lcudart -lnccl -Wall -o build/conflict_allinone_c2g -Wl,-rpath=/home/yhy/.local/nccl/build/lib
rm comm.o conflict_allinone_c2g.o utils.o
make[1]: Leaving directory '/home/yhy/llm/comm_test/csrc'
BACKEND: MPI
CP_FILE_NAME: c2g
NNODES: 1
NGPU_PER_NODE: 8
[0]
time 0.325094 s, REAL_BD 4.614050 GB/s, SIZE 524288.000000 KB, comm_vol 1572864.000000 KB
time 1.297418 s, REAL_BD 4.624570 GB/s, SIZE 2097152.000000 KB, comm_vol 6291456.000000 KB
[0,1]
time 0.327989 s, REAL_BD 9.146648 GB/s, SIZE 524288.000000 KB, comm_vol 3145728.000000 KB
time 1.307281 s, REAL_BD 9.179358 GB/s, SIZE 2097152.000000 KB, comm_vol 12582912.000000 KB
[0,4]
time 0.325419 s, REAL_BD 9.218884 GB/s, SIZE 524288.000000 KB, comm_vol 3145728.000000 KB
time 1.300117 s, REAL_BD 9.229939 GB/s, SIZE 2097152.000000 KB, comm_vol 12582912.000000 KB
[0,1,2,3]
time 0.331899 s, REAL_BD 18.077789 GB/s, SIZE 524288.000000 KB, comm_vol 6291456.000000 KB
time 1.324680 s, REAL_BD 18.117583 GB/s, SIZE 2097152.000000 KB, comm_vol 25165824.000000 KB
[0,2,4,6]
time 0.327581 s, REAL_BD 18.316081 GB/s, SIZE 524288.000000 KB, comm_vol 6291456.000000 KB
time 1.310014 s, REAL_BD 18.320415 GB/s, SIZE 2097152.000000 KB, comm_vol 25165824.000000 KB
[0,1,2,3,4,5,6,7]
time 0.334108 s, REAL_BD 35.916530 GB/s, SIZE 524288.000000 KB, comm_vol 12582912.000000 KB
time 1.332011 s, REAL_BD 36.035738 GB/s, SIZE 2097152.000000 KB, comm_vol 50331648.000000 KB
