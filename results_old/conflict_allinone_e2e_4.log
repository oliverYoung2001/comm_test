make -C csrc clean
make[1]: Entering directory '/home/yhy/fold/comm_test/csrc'
rm -f `ls *.o | grep -v jsoncpp.o`
rm -f all2all_test net_test net_test_cuda conflict_test_cuda net_test_mpi conflict_allinone net_test_cpu nccl_test cpu2gpu \
   benchmark_p2p ring_patterns all2all_baseline single_turn mixed_p2p netflow all2allv_MPI all2allv_allinone
rm -rf build
make[1]: Leaving directory '/home/yhy/fold/comm_test/csrc'
make -C csrc conflict_allinone
make[1]: Entering directory '/home/yhy/fold/comm_test/csrc'
nvcc conflict_allinone.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o conflict_allinone.o
nvcc comm.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o comm.o
nvcc utils.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o utils.o
mkdir -p build
"`which mpicxx`" conflict_allinone.o comm.o jsoncpp.o utils.o -no-pie -std=c++11 -fopenmp -L/home/yhy/.local/nccl/build/lib -lcudart -lnccl -Wall -o build/conflict_allinone -Wl,-rpath=/home/yhy/.local/nccl/build/lib
rm comm.o conflict_allinone.o utils.o
make[1]: Leaving directory '/home/yhy/fold/comm_test/csrc'
CP_FILE_NAME: E2E_4
HOST: nico2
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 8
NODE_NUM: 1
NTASK_PER_NODE: 8
BACKEND: NCCL
[[0,1],[1,0],[2,3],[3,2],[0,2],[1,3],[2,0],[3,1],[0,3],[1,2],[2,1],[3,0]]
time 0.002687 s, REAL_BD 13.083830 GB/s, SIZE 1024.000000 KB, comm_vol 36864.000000 KB
time 0.293987 s, REAL_BD 15.306799 GB/s, SIZE 131072.000000 KB, comm_vol 4718592.000000 KB
time 1.175427 s, REAL_BD 15.313584 GB/s, SIZE 524288.000000 KB, comm_vol 18874368.000000 KB
CP_FILE_NAME: E2E_4
HOST: nico2
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 8
NODE_NUM: 1
NTASK_PER_NODE: 8
srun: job 248923 queued and waiting for resources
srun: job 248923 has been allocated resources
BACKEND: MPI
[[0,1],[1,0],[2,3],[3,2],[0,2],[1,3],[2,0],[3,1],[0,3],[1,2],[2,1],[3,0]]
time 0.004324 s, REAL_BD 8.130493 GB/s, SIZE 1024.000000 KB, comm_vol 36864.000000 KB
time 0.537258 s, REAL_BD 8.375864 GB/s, SIZE 131072.000000 KB, comm_vol 4718592.000000 KB
time 2.256342 s, REAL_BD 7.977514 GB/s, SIZE 524288.000000 KB, comm_vol 18874368.000000 KB
CP_FILE_NAME: E2E_4
HOST: nico2
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 1
NODE_NUM: 1
NTASK_PER_NODE: 1
srun: job 248924 queued and waiting for resources
srun: job 248924 has been allocated resources
BACKEND: cudaMemcpy-P
[[0,1],[1,0],[2,3],[3,2],[0,2],[1,3],[2,0],[3,1],[0,3],[1,2],[2,1],[3,0]]
time 0.002141 s, REAL_BD 16.420481 GB/s, SIZE 1024.000000 KB, comm_vol 36864.000000 KB
time 0.244466 s, REAL_BD 18.407468 GB/s, SIZE 131072.000000 KB, comm_vol 4718592.000000 KB
time 0.979220 s, REAL_BD 18.381977 GB/s, SIZE 524288.000000 KB, comm_vol 18874368.000000 KB
CP_FILE_NAME: E2E_4
HOST: nico2
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 1
NODE_NUM: 1
NTASK_PER_NODE: 1
srun: job 248925 queued and waiting for resources
srun: job 248925 has been allocated resources
BACKEND: cudaMemcpy-nP
[[0,1],[1,0],[2,3],[3,2],[0,2],[1,3],[2,0],[3,1],[0,3],[1,2],[2,1],[3,0]]
time 0.002906 s, REAL_BD 12.097815 GB/s, SIZE 1024.000000 KB, comm_vol 36864.000000 KB
time 0.274091 s, REAL_BD 16.417905 GB/s, SIZE 131072.000000 KB, comm_vol 4718592.000000 KB
time 1.096438 s, REAL_BD 16.416797 GB/s, SIZE 524288.000000 KB, comm_vol 18874368.000000 KB
