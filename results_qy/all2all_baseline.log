make -C csrc clean
make[1]: Entering directory '/home/yhy/fold/comm_test/csrc'
rm -f `ls *.o | grep -v jsoncpp.o`
rm -f all2all_test net_test net_test_cuda conflict_test_cuda net_test_mpi conflict_allinone net_test_cpu nccl_test cpu2gpu \
   benchmark_p2p ring_patterns all2all_baseline single_turn mixed_p2p
make[1]: Leaving directory '/home/yhy/fold/comm_test/csrc'
make -C csrc all2all_baseline
make[1]: Entering directory '/home/yhy/fold/comm_test/csrc'
nvcc all2all_baseline.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o all2all_baseline.o
nvcc comm.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o comm.o
nvcc utils.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o utils.o
"`which mpicxx`" all2all_baseline.o comm.o jsoncpp.o utils.o -std=c++11 -fopenmp -L/home/yhy/.local/nccl/build/lib -lcudart -lnccl -Wall -o all2all_baseline -Wl,-rpath=/home/yhy/.local/nccl/build/lib
make[1]: Leaving directory '/home/yhy/fold/comm_test/csrc'
CP_FILE_NAME: all2all_8
HOST: zoltan
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 1
NODE_NUM: 1
NTASK_PER_NODE: 1
BACKEND: cudaMemcpy-P
time 0.037297 s, REAL_BD 14.662707 GB/s, SIZE 1024.000000 KB
time 3.998170 s, REAL_BD 17.508010 GB/s, SIZE 131072.000000 KB
time 7.912195 s, REAL_BD 17.694205 GB/s, SIZE 262144.000000 KB
CP_FILE_NAME: all2all_8
HOST: zoltan
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 1
NODE_NUM: 1
NTASK_PER_NODE: 1
srun: job 162327 queued and waiting for resources
srun: job 162327 has been allocated resources
BACKEND: cudaMemcpy-nP
time 0.037982 s, REAL_BD 14.398268 GB/s, SIZE 1024.000000 KB
time 6.168917 s, REAL_BD 11.347211 GB/s, SIZE 131072.000000 KB
time 15.889819 s, REAL_BD 8.810673 GB/s, SIZE 262144.000000 KB
CP_FILE_NAME: all2all_8
HOST: zoltan
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 8
NODE_NUM: 1
NTASK_PER_NODE: 8
srun: job 162328 queued and waiting for resources
srun: job 162328 has been allocated resources
BACKEND: NCCL
time 0.002635 s, REAL_BD 207.542694 GB/s, SIZE 1024.000000 KB
time 0.201139 s, REAL_BD 348.018037 GB/s, SIZE 131072.000000 KB
time 0.400551 s, REAL_BD 349.518538 GB/s, SIZE 262144.000000 KB
CP_FILE_NAME: all2all_8
HOST: zoltan
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 8
NODE_NUM: 1
NTASK_PER_NODE: 8
srun: job 162329 queued and waiting for resources
srun: job 162329 has been allocated resources
BACKEND: MPI
time 0.094773 s, REAL_BD 5.770367 GB/s, SIZE 1024.000000 KB
time 11.754943 s, REAL_BD 5.954942 GB/s, SIZE 131072.000000 KB
time 24.174280 s, REAL_BD 5.791279 GB/s, SIZE 262144.000000 KB
make -C csrc clean
make[1]: Entering directory '/home/yhy/fold/comm_test/csrc'
rm -f `ls *.o | grep -v jsoncpp.o`
rm -f all2all_test net_test net_test_cuda conflict_test_cuda net_test_mpi conflict_allinone net_test_cpu nccl_test cpu2gpu \
   benchmark_p2p ring_patterns all2all_baseline single_turn mixed_p2p
make[1]: Leaving directory '/home/yhy/fold/comm_test/csrc'
make -C csrc all2all_baseline
make[1]: Entering directory '/home/yhy/fold/comm_test/csrc'
nvcc all2all_baseline.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o all2all_baseline.o
nvcc comm.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o comm.o
nvcc utils.cu -std=c++11 -Xcompiler -fopenmp -I/home/yhy/.local/nccl/build/include -L/home/yhy/.local/nccl/build/lib/ "-gencode=arch=compute_70,code=sm_70" -lnccl -lcudart -c -o utils.o
"`which mpicxx`" all2all_baseline.o comm.o jsoncpp.o utils.o -std=c++11 -fopenmp -L/home/yhy/.local/nccl/build/lib -lcudart -lnccl -Wall -o all2all_baseline -Wl,-rpath=/home/yhy/.local/nccl/build/lib
make[1]: Leaving directory '/home/yhy/fold/comm_test/csrc'
CP_FILE_NAME: all2all_8
HOST: zoltan
CUDA_VISIBLE_DEVICES: 
GPU_NUM: 8
PROC_NUM: 8
NODE_NUM: 1
NTASK_PER_NODE: 8
BACKEND: NCCL
time 0.002668 s, REAL_BD 204.975637 GB/s, SIZE 1024.000000 KB
time 0.007054 s, REAL_BD 310.107740 GB/s, SIZE 4096.000000 KB
time 0.201504 s, REAL_BD 347.387645 GB/s, SIZE 131072.000000 KB
time 0.400168 s, REAL_BD 349.853062 GB/s, SIZE 262144.000000 KB
